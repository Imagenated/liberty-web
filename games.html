<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Liberty Web – Flappy Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  html, body {
    height: 100%;
    overflow: hidden;
  }

  body {
    margin: 0;
    background: #f3f4f6;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, Helvetica, sans-serif;
  }

  .home-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    text-decoration: none;
    font-size: 14px;
    padding: 8px 16px;
    border-radius: 20px;
    background: #ffffff;
    border: 1px solid #d1d5db;
    color: #111;
  }

  canvas {
    background: #ffffff;
    border-radius: 16px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.08);
  }
</style>
</head>

<body>

<a href="tools.html" class="home-btn">← Home</a>

<canvas id="game" width="400" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let birdY = 250;
let velocity = 0;
let gravity = 0.5;
let lift = -8;

let pipes = [];
let frame = 0;
let score = 0;
let gameOver = false;

// Bird
function drawBird() {
  ctx.fillStyle = "#111";
  ctx.beginPath();
  ctx.arc(80, birdY, 12, 0, Math.PI * 2);
  ctx.fill();
}

// Pipes
function addPipe() {
  let gap = 130;
  let topHeight = Math.random() * 200 + 50;
  pipes.push({
    x: canvas.width,
    top: topHeight,
    bottom: topHeight + gap,
    passed: false
  });
}

function drawPipes() {
  ctx.fillStyle = "#d1d5db";
  pipes.forEach(pipe => {
    ctx.fillRect(pipe.x, 0, 50, pipe.top);
    ctx.fillRect(pipe.x, pipe.bottom, 50, canvas.height);
  });
}

// Score
function drawScore() {
  ctx.fillStyle = "#111";
  ctx.font = "20px Arial";
  ctx.fillText("Score: " + score, 20, 30);
}

// Update
function update() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  velocity += gravity;
  birdY += velocity;

  if (frame % 90 === 0) addPipe();
  frame++;

  pipes.forEach(pipe => {
    pipe.x -= 2;

    // Collision
    if (
      80 + 12 > pipe.x &&
      80 - 12 < pipe.x + 50 &&
      (birdY - 12 < pipe.top || birdY + 12 > pipe.bottom)
    ) {
      gameOver = true;
    }

    // Score
    if (!pipe.passed && pipe.x + 50 < 80) {
      score++;
      pipe.passed = true;
    }
  });

  pipes = pipes.filter(pipe => pipe.x > -60);

  if (birdY > canvas.height || birdY < 0) {
    gameOver = true;
  }

  drawPipes();
  drawBird();
  drawScore();

  if (gameOver) {
    ctx.fillStyle = "#111";
    ctx.font = "28px Arial";
    ctx.fillText("Game Over", 120, 240);
    ctx.font = "16px Arial";
    ctx.fillText("Refresh to restart", 130, 270);
  }

  requestAnimationFrame(update);
}

// Controls
document.addEventListener("keydown", e => {
  if (e.code === "Space") velocity = lift;
});

canvas.addEventListener("click", () => {
  velocity = lift;
});

update();
</script>

</body>
</html>
